<section class="auth-layout">
  <div class="auth-card card">
    <p class="overline">Password reset</p>
    <h2>{{ step === 'request' ? 'Request reset' : 'Reset password' }}</h2>
    <p class="muted small">
      In production this would email you a token. For now, we return it so you can confirm directly.
    </p>

    <div class="form-grid" *ngIf="step === 'request'">
      <div class="form-field">
        <label for="email">Email</label>
        <input id="email" type="email" [(ngModel)]="email" placeholder="you@example.com" />
      </div>
      <div class="alert error" *ngIf="error">{{ error }}</div>
      <div class="alert success" *ngIf="message">{{ message }}</div>
      <button class="btn btn-primary" (click)="request()" [disabled]="loading">Request reset</button>
    </div>

    <div class="form-grid" *ngIf="step === 'confirm'">
      <div class="form-field">
        <label for="token">Token</label>
        <input id="token" type="text" [(ngModel)]="token" />
      </div>
      <div class="form-field">
        <label for="newPassword">New password</label>
        <input id="newPassword" type="password" [(ngModel)]="newPassword" />
      </div>
      <div class="alert error" *ngIf="error">{{ error }}</div>
      <div class="alert success" *ngIf="message">{{ message }}</div>
      <button class="btn btn-primary" (click)="confirm()" [disabled]="loading">Reset password</button>
    </div>
  </div>
</section>
